<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 부트 스트랩 css -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <!-- 부트 스트랩 아이콘 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <!-- 구글 폰트 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Maven+Pro&display=swap" rel="stylesheet">
  <title>HOST-SIGN-IN-FORM</title>
</head>
<style>
  body {
    font-family: 'Maven Pro', sans-serif;
    ;
  }
</style>

<body>
  <div class="container mb-5" style="background-color: rgba(186, 218, 248, 0.082);">
    <main>
      <div class="py-4 text-center">
        <i class="bi bi-person-bounding-box mx-auto mb-3 fs-1"></i>
        <h2>HOST FORM</h2>
        <p class="lead">Lorem ipsum, dolor sit amet consectetur adipisicing elit.</p>
      </div>
      <div class="row g-5 justify-content-center">
        <div class="col-md-7 col-lg-8">
          <h4 class="mb-3">Host Info</h4>
          <form class="needs-validation was-validated" action="#" method="post">
            <div class="row g-3">
              <div class="col-10">
                <label for="loginId" class="form-label">ID *</label>
                <input type="text" class="form-control" id="loginId" placeholder="ID (4 ~ 20자)"
                  aria-describedby="range-error" required maxlength=20>
                <div class="invalid-feedback">
                  <i class="bi bi-exclamation-circle"></i> ID는 필수로 입력 해야돼요.
                </div>
                <div id="range-error" class="invalid-feedback">
                  <i class="bi bi-exclamation-circle"></i> ID 길이는 4~20자 입니다.
                </div>
              </div>

              <div class="col-10">
                <label for="password" class="form-label">Password *</label>
                <input type="password" class="form-control" id="password" placeholder="PASSWORD (4 ~ 20자)" required
                  maxlength=20>
                <label for="check" class="form-label">Password Check*</label>
                <input type="password" class="form-control" id="check" placeholder="PASSWORD CHECK" aria-describedby=""
                  required>
                <div class="invalid-feedback">
                  <i class="bi bi-exclamation-circle"></i> 비밀번호는 필수로 입력 해야돼요.
                </div>
                <div class="unchecked-password" style="color: rgb(231, 24, 24); font-size:0.85em;">
                  <span><i class="bi bi-exclamation-circle"></i> 비밀번호를 확인 해주세요</span>
                </div>
                <div class="checked-password" style="color: rgb(83, 194, 83); font-size:0.85em;">
                  <p><i class="bi bi-check-circle"></i> 비밀번호 확인</p>
                </div>
              </div>

              <hr class="my-4">
              <div class="col-10">
                <label for="name" class="form-label">Host Name *</label>
                <input type="text" class="form-control" id="name" placeholder="HOST NAME" required>
                <div class="invalid-feedback">
                  <i class="bi bi-exclamation-circle"></i> 호스트 이름은 필수로 입력 해야돼요.
                </div>
              </div>

              <div class="col-10">
                <label for="phone" class="form-label">Phone *</label>
                <input type="tel" class="form-control phoneNumber" id="phone" placeholder="PHONE NUMBER" required
                  maxlength=13>
                <div class="invalid-feedback">
                  <i class="bi bi-exclamation-circle"></i> 전화번호는 필수로 입력 해야돼요.
                </div>
              </div>

              <div class="col-10">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" placeholder="you@example.com">
                <div class="invalid-feedback">
                  <i class="bi bi-exclamation-circle"></i> 이메일 형식이 맞지 않아요.
                </div>
              </div>

              <div class="col-10">
                <label for="addr" class="form-label">Address *</label>
                <input type="text" class="form-control is-invalid" id="addr" placeholder="찾기 버튼을 눌러주세요" required
                  readonly />
                <div class="invalid-feedback">
                  <i class="bi bi-exclamation-circle"></i> 주소는 필수로 입력 해야돼요.
                </div>
                <div class="valid-feedback">
                  <p><i class="bi bi-check-circle"></i> 찾은 주소는 여기에요!</p>
                </div>
              </div>
              <div class="col-2 my-auto py-5">
                <button type="button" class="btn btn-outline-primary" onclick="findAddr()">찾기</button>
              </div>
              <div id="map" style="width:300px;height:300px;display:none;border-radius: 50%;"></div>
            </div>
            <hr class="my-4">
            <button id="submit" class="w-100 btn btn-primary btn-lg" type="submit" disabled="disabled">Sign-in</button>
          </form>
        </div>
      </div>
    </main>
  </div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
  <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=7101ebc2d492a3cb9353b4add07670be&libraries=services"></script>
  <script>
    //password check validation
    $('.checked-password').hide();
    $('.unchecked-password').hide();
    $("#check, #password").on("change", () => {
      let password = $('#password').val();
      let passwordcheck = $('#check').val();
      if ((password != "" && passwordcheck != "") && password == passwordcheck) {
        $('.unchecked-password').hide();
        $('.checked-password').show();
        $('#submit').removeAttr("disabled", "disabled");
      }
      else {
        $('.checked-password').hide();
        $('.unchecked-password').show();
        $('#submit').attr("disabled", "disabled");
      }
    });
    //phone number validation
    $(document).on("keyup", ".phoneNumber", function () { $(this).val($(this).val().replace(/[^0-9]/g, "").replace(/(^02|^0505|^1[0-9]{3}|^0[0-9]{2})([0-9]+)?([0-9]{4})$/, "$1-$2-$3").replace("--", "-")); });
  </script>
  <script>
    //addr validation
    let mapContainer = document.getElementById('map'), // 지도를 표시할 div
      mapOption = {
        center: new daum.maps.LatLng(37.537187, 127.005476), // 지도의 중심좌표
        level: 5 // 지도의 확대 레벨
      };

    //지도를 미리 생성
    let map = new daum.maps.Map(mapContainer, mapOption);
    //주소-좌표 변환 객체를 생성
    let geocoder = new daum.maps.services.Geocoder();
    //마커를 미리 생성
    let marker = new daum.maps.Marker({
      position: new daum.maps.LatLng(33.361417, 126.529417),
      map: map
    });


    function findAddr() {
      new daum.Postcode({
        oncomplete: function (data) {
          let addr = data.address; // 최종 주소 변수
          // 주소 정보를 해당 필드에 넣는다.
          const addrInput = document.getElementById("addr")
          addrInput.value = addr;
          // 주소로 상세 정보를 검색
          geocoder.addressSearch(data.address, function (results, status) {
            // 정상적으로 검색이 완료됐으면
            if (status === daum.maps.services.Status.OK) {
              addrInput.classList.remove('is-invalid');
              addrInput.classList.add('is-valid');
              let result = results[0]; //첫번째 결과의 값을 활용

              // 해당 주소에 대한 좌표를 받아서
              let coords = new daum.maps.LatLng(result.y, result.x);
              // 지도를 보여준다.
              mapContainer.style.display = "block";
              map.relayout();
              // 지도 중심을 변경한다.
              map.setCenter(coords);
              // 마커를 결과값으로 받은 위치로 옮긴다.
              marker.setPosition(coords)
            }
          });
        }
      }).open();
    }

  </script>

</body>

</html>